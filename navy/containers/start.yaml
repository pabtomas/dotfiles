---

run:
  - endpoint: /containers/{id}/start
    method: POST
    loop:
      - id: containers.start.virtual.listened
        virtual: true
        depends_on:
          - containers.start.listener
      - id: containers.start.builder
        path:
          id: {{ (datasource "datasources/builder.yaml").host }}
        depends_on:
          - containers.create.builder
      - id: containers.start.carpenter.relay
        path:
          id: {{ (datasource "datasources/carpenter/relay.yaml").host }}
        depends_on:
          - containers.create.carpenter.relay
          - containers.start.xserver
      - id: containers.start.carpenter.runner
        path:
          id: {{ (datasource "datasources/carpenter/runner.yaml").host }}
        depends_on:
          - containers.create.carpenter.runner
          - containers.start.carpenter.relay
      - id: containers.start.controller
        path:
          id: {{ (datasource "datasources/controller.yaml").host }}
        depends_on:
          - containers.create.controller
          - containers.start.builder
          - containers.start.proxy
          - containers.start.registry
          - containers.start.xserver
        extends:
          - containers.start.virtual.listened
      - id: containers.start.editor
        path:
          id: {{ (datasource "datasources/editor.yaml").host }}
        depends_on:
          - containers.create.editor
        extends:
          - containers.start.virtual.listened
      - id: containers.start.explorer.shell
        path:
          id: {{ (datasource "datasources/explorers/shell.yaml").host }}
        depends_on:
          - containers.create.explorer.shell
        extends:
          - containers.start.virtual.listened
      - id: containers.start.explorer.zig
        path:
          id: {{ (datasource "datasources/explorers/zig.yaml").host }}
        depends_on:
          - containers.create.explorer.zig
        extends:
          - containers.start.virtual.listened
      - id: containers.start.jumper
        path:
          id: {{ (datasource "datasources/jumper.yaml").host }}
        depends_on:
          - containers.create.jumper
          - containers.start.controller
          - containers.start.explorer.shell
          - containers.start.explorer.zig
          - containers.start.safedeposit
          - containers.start.scholar
        extends:
          - containers.start.virtual.listened
      - id: containers.start.listener
        path:
          id: {{ (datasource "datasources/listener.yaml").host }}
        depends_on:
          - containers.create.listener
          - containers.start.proxy
      - id: containers.start.proxy
        path:
          id: {{ (datasource "datasources/socket-proxy.yaml").host }}
        depends_on:
          - containers.create.proxy
      - id: containers.start.registry
        path:
          id: {{ (datasource "datasources/registry.yaml").host }}
        depends_on:
          - containers.create.registry
      - id: containers.start.safedeposit
        path:
          id: {{ (datasource "datasources/safedeposit.yaml").host }}
        depends_on:
          - containers.create.safedeposit
        extends:
          - containers.start.virtual.listened
      - id: containers.start.scholar
        path:
          id: {{ (datasource "datasources/scholar.yaml").host }}
        depends_on:
          - containers.create.scholar
        extends:
          - containers.start.virtual.listened
      - id: containers.start.spaceporn.relay
        path:
          id: {{ (datasource "datasources/spaceporn/relay.yaml").host }}
        depends_on:
          - containers.create.spaceporn.relay
          - containers.start.xserver
      - id: containers.start.spaceporn.runner
        path:
          id: {{ (datasource "datasources/spaceporn/runner.yaml").host }}
        depends_on:
          - containers.create.spaceporn.runner
          - containers.start.spaceporn.relay
      - id: containers.start.xserver
        path:
          id: {{ (datasource "datasources/xserver.yaml").host }}
        depends_on:
          - containers.create.xserver

...
