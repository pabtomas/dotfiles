#! /bin/sh

main ()
{
  set -eux

  # parse options:
  #   * --no-cache

  # define default values

  # if cache not found:
  #   resolve private anchors
  #   resolve includes
  #   change loop requests and requests[].loop into dictionnaries
  #   resolve extends (replace them with anchors and aliases then use yq explode)
  #   envsubst
  #   yq script to generate sh script.
  #   generate cache: sha256sum <(find . -type -f -exec sha256sum {} \; | sort  | cut -d' ' -f1)
  # fi
  # run sh script with: seq 1 10 | xargs --max-args 1 --max-procs "$(( $(nproc) + 1 ))" ./script
}

main "${@}"
