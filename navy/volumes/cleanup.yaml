---

handlers:
  - endpoint: /volumes
    method: GET
    register:
      query:
        filters: '{"label":{"navy":true}}'
      as:
        id: handlers.volumes.json
  - endpoint: /volumes/{name}
    method: DELETE
    from:
      filter: '{{ $array := "" }}{{ range (datasource "handlers.volumes.json") }}{{ $array = print $array "{\"path\":{\"name\":\"" .Name "\"},\"query\":{\"force\":true}}," }}{{ end }}{{ print "[" $array "]" | data.YAMLArray }}'
      depends_on:
        - handlers.volumes.json

...
