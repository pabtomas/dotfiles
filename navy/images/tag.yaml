---

run:
  - endpoint: /images/{name}/tag
    method: POST
    loop:
      - id: images.tag.alpine
        query:
          repo: '{{ $alpine.image.local }}'
          tag: '{{ $alpine.tag }}'
        path:
          name: '{{ $alpine.image.source }}{{ $all.sep.tag }}{{ $alpine.tag }}'
        depends_on:
          - images.pull.alpine
      - id: images.tag.bash
        query:
          repo: '{{ $bash.image.local }}'
          tag: '{{ $bash.tag }}'
        path:
          name: '{{ $bash.image.source }}{{ $all.sep.tag }}{{ $bash.tag }}'
        depends_on:
          - images.pull.bash
      - id: images.tag.buildkit
        query:
          repo: '{{ $buildkit.image.local }}'
          tag: '{{ $buildkit.tag }}'
        path:
          name: '{{ $buildkit.image.source }}{{ $all.sep.tag }}{{ $buildkit.tag }}'
        depends_on:
          - images.pull.buildkit
      - id: images.tag.docker
        query:
          repo: '{{ $docker.image.local }}'
          tag: '{{ $docker.tag }}'
        path:
          name: '{{ $docker.image.source }}{{ $all.sep.tag }}{{ $docker.tag }}'
        depends_on:
          - images.pull.docker
      - id: images.tag.proxy
        query:
          repo: '{{ $socketproxy.linuxserver.image.local }}'
          tag: '{{ $socketproxy.linuxserver.tag }}'
        path:
          name: '{{ $socketproxy.linuxserver.image.source }}{{ $all.sep.tag }}{{ $socketproxy.linuxserver.tag }}'
        depends_on:
          - images.pull.proxy
      - id: images.tag.registry
        query:
          repo: '{{ $registry.image.local }}'
          tag: '{{ $registry.tag }}'
        path:
          name: '{{ $registry.image.source }}{{ $all.sep.tag }}{{ $registry.tag }}'
        depends_on:
          - images.pull.registry

...
