---

run:
  - endpoint: /images/{name}/tag
    method: POST
    loop:
      - id: images.tag.alpine
        query:
          repo: {{ (datasource "datasources/alpine.yaml").image.local }}
          tag: {{ (datasource "datasources/alpine.yaml").tag }}
        path:
          name: {{ (datasource "datasources/alpine.yaml").image.source }}{{ (datasource "datasources/all.yaml").sep.tag }}{{ (datasource "datasources/alpine.yaml").tag }}
        depends_on:
          - images.pull.alpine
      - id: images.tag.bash
        query:
          repo: {{ (datasource "datasources/bash.yaml").image.local }}
          tag: {{ (datasource "datasources/bash.yaml").tag }}
        path:
          name: {{ (datasource "datasources/bash.yaml").image.source }}{{ (datasource "datasources/all.yaml").sep.tag }}{{ (datasource "datasources/bash.yaml").tag }}
        depends_on:
          - images.pull.bash
      - id: images.tag.buildkit
        query:
          repo: {{ (datasource "datasources/buildkit.yaml").image.local }}
          tag: {{ (datasource "datasources/buildkit.yaml").tag }}
        path:
          name: {{ (datasource "datasources/buildkit.yaml").image.source }}{{ (datasource "datasources/all.yaml").sep.tag }}{{ (datasource "datasources/buildkit.yaml").tag }}
        depends_on:
          - images.pull.buildkit
      - id: images.tag.docker
        query:
          repo: {{ (datasource "datasources/docker.yaml").image.local }}
          tag: {{ (datasource "datasources/docker.yaml").tag }}
        path:
          name: {{ (datasource "datasources/docker.yaml").image.source }}{{ (datasource "datasources/all.yaml").sep.tag }}{{ (datasource "datasources/docker.yaml").tag }}
        depends_on:
          - images.pull.docker
      - id: images.tag.proxy
        query:
          repo: {{ (datasource "datasources/socket-proxy.yaml").linuxserver.image.local }}
          tag: {{ (datasource "datasources/socket-proxy.yaml").linuxserver.tag }}
        path:
          name: {{ (datasource "datasources/socket-proxy.yaml").linuxserver.image.source }}{{ (datasource "datasources/all.yaml").sep.tag }}{{ (datasource "datasources/socket-proxy.yaml").linuxserver.tag }}
        depends_on:
          - images.pull.proxy
      - id: images.tag.registry
        query:
          repo: {{ (datasource "datasources/registry.yaml").image.local }}
          tag: {{ (datasource "datasources/registry.yaml").tag }}
        path:
          name: {{ (datasource "datasources/registry.yaml").image.source }}{{ (datasource "datasources/all.yaml").sep.tag }}{{ (datasource "datasources/registry.yaml").tag }}
        depends_on:
          - images.pull.registry

...
